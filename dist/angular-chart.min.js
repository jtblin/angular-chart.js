!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(g,C){"use strict";C.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",C.defaults.global.tooltips.mode="label",C.defaults.global.elements.line.borderWidth=2,C.defaults.global.elements.rectangle.borderWidth=2,C.defaults.global.legend.display=!1,C.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var v="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return v&&(C.defaults.global.animation=!1),g.module("chart.js",[]).provider("ChartJs",function(){var a={responsive:!0},e={Chart:C,getOptions:function(t){t=t&&a[t]||{};return g.extend({},a,t)}};this.setOptions=function(t,r){r?a[t]=g.merge(a[t]||{},r):a=g.merge(a,r=t),g.merge(e.Chart.defaults,a)},this.$get=function(){return e}}).factory("ChartJsFactory",["ChartJs","$timeout",function(c,i){return function(o){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?",chartForceUpdate:"=?",chartDisplayWhenNoData:"=?"},link:function(e,n){function t(t,r){d(t)||g.equals(t,r)||(r=o||e.chartType)&&h(r,e,n)}v&&window.G_vmlCanvasManager.initElement(n[0]),e.$watch("chartData",function(t,r){if(e.chartDisplayWhenNoData||t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var a=o||e.chartType;if(a)return e.chart&&(function(t,a){if(t&&a&&t.length&&a.length)return Array.isArray(t[0])?t.length===a.length&&t.every(function(t,r){return t.length===a[r].length}):0<a.reduce(u,0)&&t.length===a.length;return!1}(t,r)||e.chartForceUpdate)?function(a,t){Array.isArray(t.chartData[0])?t.chart.data.datasets.forEach(function(t,r){t.data=a[r]}):t.chart.data.datasets[0].data=a;t.chart.update(),t.$emit("chart-update",t.chart)}(t,e):void h(a,e,n)}else p(e)},!0),e.$watch("chartSeries",t,!0),e.$watch("chartLabels",t,!0),e.$watch("chartOptions",function(t,r){d(t)||g.equals(t,r)||function(r,a){r&&(Object.keys(r).forEach(t=>{a.chart.options[t]&&(a.chart.options[t]=r[t])}),a.chart.update("quiet"),a.$emit("chart-update",a.chart))}(t,e)},!0),e.$watch("chartColors",t,!0),e.$watch("chartDatasetOverride",t,!0),e.$watch("chartType",function(t,r){d(t)||g.equals(t,r)||h(t,e,n)},!1),e.$on("$destroy",function(){p(e)}),e.$on("$resize",function(){e.chart&&e.chart.resize()})}}};function h(t,r,a){var e,n,o=(n=r,g.extend({},c.getOptions(t),n.chartOptions));(r.chartDisplayWhenNoData||(e=r).chartData&&e.chartData.length&&function(t,r,a,e){if(e.responsive&&0===a[0].clientHeight)return i(function(){h(t,r,a)},50,!1),!1;return!0}(t,r,a,o))&&(e=(n=a[0]).getContext("2d"),r.chartGetColor="function"==typeof(a=r).chartGetColor?a.chartGetColor:f,a=function(t,r){t=function(t,r){var a=g.copy(r.chartColors||c.getOptions(t).chartColors||C.defaults.global.colors),t=a.length<r.chartData.length;for(;a.length<r.chartData.length;)a.push(r.chartGetColor());t&&(r.chartColors=a);return a.map(s)}(t,r);return Array.isArray(r.chartData[0])?function(t,r,a,e,n){return{labels:t,datasets:r.map(function(t,r){t=g.extend({},e[r],{label:a[r],data:t});return n&&n.length>=r&&g.merge(t,n[r]),t})}}(r.chartLabels,r.chartData,r.chartSeries||[],t,r.chartDatasetOverride):function(t,r,a,e){a={labels:t,datasets:[{data:r,backgroundColor:a.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:a.map(function(t){return t.backgroundColor})}]};e&&g.merge(a.datasets[0],e);return a}(r.chartLabels,r.chartData,t,r.chartDatasetOverride)}(t,r),p(r),r.chart=new c.Chart(e,{type:t,data:a,options:o}),r.$emit("chart-create",r.chart),r=r,(n=n).onclick=r.chartClick?l(r,"chartClick",!1):g.noop,n.onmousemove=r.chartHover?l(r,"chartHover",!0):g.noop)}function u(t,r){return t+r}function l(e,n,o){var c={point:void 0,points:void 0};return function(t){var r=e.chart.getElementAtEvent||e.chart.getPointAtEvent,a=e.chart.getElementsAtEvent||e.chart.getPointsAtEvent;a&&(a=a.call(e.chart,t),r=r?r.call(e.chart,t)[0]:void 0,!1!==o&&(g.equals(c.points,a)||g.equals(c.point,r))||(c.point=r,c.points=a,e[n](a,t,r)))}}function s(t){return"string"==typeof t&&"r"===t[0]?r(function(t){var r=t.match(/^rgba?\(([\d,.]+)\)$/);if(!r)throw new Error("Cannot parse rgb value");return(t=r[1].split(",")).map(Number)}(t)):"string"==typeof t&&"#"===t[0]?r(function(t){t=parseInt(t,16);return[t>>16&255,t>>8&255,255&t]}(t.substr(1))):"object"==typeof t&&null!==t?t:f()}function f(){return r([t(0,255),t(0,255),t(0,255)])}function r(t){var r=t[3]||1;return{backgroundColor:a(t=t.slice(0,3),.2),pointBackgroundColor:a(t,r),pointHoverBackgroundColor:a(t,.8),borderColor:a(t,r),pointBorderColor:"#fff",pointHoverBorderColor:a(t,r)}}function t(t,r){return Math.floor(Math.random()*(r-t+1))+t}function a(t,r){return v?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function d(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function p(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name});