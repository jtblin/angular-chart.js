!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(p,C){"use strict";C.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",C.defaults.global.tooltips.mode="label",C.defaults.global.elements.line.borderWidth=2,C.defaults.global.elements.rectangle.borderWidth=2,C.defaults.global.legend.display=!1,C.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var v="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return v&&(C.defaults.global.animation=!1),p.module("chart.js",[]).provider("ChartJs",function(){var e={responsive:!0},a={Chart:C,getOptions:function(t){t=t&&e[t]||{};return p.extend({},e,t)}};this.setOptions=function(t,r){r?e[t]=p.merge(e[t]||{},r):e=p.merge(e,r=t),p.merge(a.Chart.defaults,e)},this.$get=function(){return a}}).factory("ChartJsFactory",["ChartJs","$timeout",function(c,i){return function(o){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?",chartForceUpdate:"=?"},link:function(a,n){function t(t,r){d(t)||p.equals(t,r)||(r=o||a.chartType)&&u(r,a,n)}v&&window.G_vmlCanvasManager.initElement(n[0]),a.$watch("chartData",function(t,r){if(t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var e=o||a.chartType;if(e)return a.chart&&(function(t,e){if(t&&e&&t.length&&e.length)return Array.isArray(t[0])?t.length===e.length&&t.every(function(t,r){return t.length===e[r].length}):0<e.reduce(h,0)&&t.length===e.length;return!1}(t,r)||a.chartForceUpdate)?function(e,t){Array.isArray(t.chartData[0])?t.chart.data.datasets.forEach(function(t,r){t.data=e[r]}):t.chart.data.datasets[0].data=e;t.chart.update(),t.$emit("chart-update",t.chart)}(t,a):void u(e,a,n)}else g(a)},!0),a.$watch("chartSeries",t,!0),a.$watch("chartLabels",t,!0),a.$watch("chartOptions",function(t,r){d(t)||p.equals(t,r)||function(r,e){r&&(Object.keys(r).forEach(t=>{e.chart.options[t]&&(e.chart.options[t]=r[t])}),e.chart.update("quiet"),e.$emit("chart-update",e.chart))}(t,a)},!0),a.$watch("chartColors",t,!0),a.$watch("chartDatasetOverride",t,!0),a.$watch("chartType",function(t,r){d(t)||p.equals(t,r)||u(t,a,n)},!1),a.$on("$destroy",function(){g(a)}),a.$on("$resize",function(){a.chart&&a.chart.resize()})}}};function u(t,r,e){var a,n,o=(n=r,p.extend({},c.getOptions(t),n.chartOptions));(a=r).chartData&&a.chartData.length&&function(t,r,e,a){if(a.responsive&&0===e[0].clientHeight)return i(function(){u(t,r,e)},50,!1),!1;return!0}(t,r,e,o)&&(a=(n=e[0]).getContext("2d"),r.chartGetColor="function"==typeof(e=r).chartGetColor?e.chartGetColor:f,e=function(t,r){t=function(t,r){var e=p.copy(r.chartColors||c.getOptions(t).chartColors||C.defaults.global.colors),t=e.length<r.chartData.length;for(;e.length<r.chartData.length;)e.push(r.chartGetColor());t&&(r.chartColors=e);return e.map(s)}(t,r);return Array.isArray(r.chartData[0])?function(t,r,e,a,n){return{labels:t,datasets:r.map(function(t,r){t=p.extend({},a[r],{label:e[r],data:t});return n&&n.length>=r&&p.merge(t,n[r]),t})}}(r.chartLabels,r.chartData,r.chartSeries||[],t,r.chartDatasetOverride):function(t,r,e,a){e={labels:t,datasets:[{data:r,backgroundColor:e.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:e.map(function(t){return t.backgroundColor})}]};a&&p.merge(e.datasets[0],a);return e}(r.chartLabels,r.chartData,t,r.chartDatasetOverride)}(t,r),g(r),r.chart=new c.Chart(a,{type:t,data:e,options:o}),r.$emit("chart-create",r.chart),r=r,(n=n).onclick=r.chartClick?l(r,"chartClick",!1):p.noop,n.onmousemove=r.chartHover?l(r,"chartHover",!0):p.noop)}function h(t,r){return t+r}function l(a,n,o){var c={point:void 0,points:void 0};return function(t){var r=a.chart.getElementAtEvent||a.chart.getPointAtEvent,e=a.chart.getElementsAtEvent||a.chart.getPointsAtEvent;e&&(e=e.call(a.chart,t),r=r?r.call(a.chart,t)[0]:void 0,!1!==o&&(p.equals(c.points,e)||p.equals(c.point,r))||(c.point=r,c.points=e,a[n](e,t,r)))}}function s(t){return"string"==typeof t&&"r"===t[0]?r(function(t){var r=t.match(/^rgba?\(([\d,.]+)\)$/);if(!r)throw new Error("Cannot parse rgb value");return(t=r[1].split(",")).map(Number)}(t)):"string"==typeof t&&"#"===t[0]?r(function(t){t=parseInt(t,16);return[t>>16&255,t>>8&255,255&t]}(t.substr(1))):"object"==typeof t&&null!==t?t:f()}function f(){return r([t(0,255),t(0,255),t(0,255)])}function r(t){var r=t[3]||1;return{backgroundColor:e(t=t.slice(0,3),.2),pointBackgroundColor:e(t,r),pointHoverBackgroundColor:e(t,.8),borderColor:e(t,r),pointBorderColor:"#fff",pointHoverBorderColor:e(t,r)}}function t(t,r){return Math.floor(Math.random()*(r-t+1))+t}function e(t,r){return v?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function d(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function g(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name});